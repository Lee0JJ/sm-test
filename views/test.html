<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>title</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      .pagination-container {
        width: 100%;
        height: 100vh;
        overflow-y: scroll;
        scroll-snap-type: y mandatory;
        scroll-behavior: smooth;
        /* Optional: for smoother animation, but browser default is 300-500ms */
        transition: scroll-behavior 3s;
      }

      .pagination-slide {
        width: 100%;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 50px;
        scroll-snap-align: start;
      }
    </style>
  </head>
  <body>
    <div class="pagination-container">
      <div class="pagination-slide" style="background-color: lightcoral">
        Slide 1
      </div>
      <div class="pagination-slide" style="background-color: lightsalmon">
        Slide 2
      </div>
      <div class="pagination-slide" style="background-color: lightgoldenrodyellow">
        Slide 3
      </div>
      <div class="pagination-slide" style="background-color: lightgreen">
        Slide 4
      </div>
      <div class="pagination-slide" style="background-color: lightblue">
        Slide 5
      </div>
    </div>
  </body>
  <script>
    // Store original background colors
    const slides = document.querySelectorAll('.pagination-slide');
    const bgColors = Array.from(slides).map(slide => slide.style.backgroundColor);
    slides.forEach((slide, i) => {
      slide.style.backgroundColor = bgColors[0];
    });

    // Helper to animate background color
    function animateBgColor(element, fromColor, toColor, duration = 600) {
      element.style.transition = 'none';
      element.style.backgroundColor = fromColor;
      // Force reflow
      void element.offsetWidth;
      element.style.transition = `background-color ${duration}ms`;
      element.style.backgroundColor = toColor;
    }

    let lastActive = 0;

    function getCurrentSlideIndex() {
      let idx = 0;
      let minDist = Infinity;
      slides.forEach((slide, i) => {
        const rect = slide.getBoundingClientRect();
        const dist = Math.abs(rect.top);
        if (dist < minDist) {
          minDist = dist;
          idx = i;
        }
      });
      return idx;
    }

    function onScroll() {
      const currentIdx = getCurrentSlideIndex();
      console.log('Current Slide Index:', currentIdx);
      if (currentIdx !== lastActive) {
        // Animate background color for the new slide
        const prevColor = bgColors[lastActive];
        const nextSlide = slides[currentIdx];
        animateBgColor(nextSlide, prevColor, bgColors[currentIdx]);
        lastActive = currentIdx;
      }
    }

    const paginationContainer = document.querySelector('.pagination-container');
    paginationContainer.addEventListener('scroll', onScroll);
    window.addEventListener('load', () => {
      // Set initial state
      slides.forEach((slide, i) => {
        slide.style.backgroundColor = bgColors[i];
      });
      lastActive = getCurrentSlideIndex();
    });
  </script>
</html>
