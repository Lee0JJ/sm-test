<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/bootstrap-icons/bootstrap-icons.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"
    />
    <link rel="stylesheet" href="/css/style.css" />

    <style>
      #main-container {
        background-image: url("/img/airplane.jpg");
        background-repeat: no-repeat;
        background-clip: border-box;
        background-size: 100% 100%;
        height: 300px;
      }

      #rightbar {
        height: fit-content;
      }

      #tourImage {
        height: 200px;
      }

      .toggle {
        border: solid 1px var(--bs-primary-light);
        color: var(--bs-primary-light);
        background-color: none;
        background: none;
      }

      .toggle:hover {
        background-color: var(--bs-primary-light);
        background: var(--bs-primary-light);
        border: var(--bs-primary-light);
        color: white;
      }

      .toggle.active {
        background-color: var(--bs-primary-light);
        background: var(--bs-primary-light);
        border: var(--bs-primary-light);
        color: white;
      }
    </style>

    <title>Hello, the world!</title>
  </head>
  <body>
    <div id="navbar-container"></div>
    <!-- poster -->
    <section id="main-container" class="w-auto py-5 text-center ms-0 me-0">
      <div class="row h-100 py-lg-5">
        <div
          class="col-lg-12 col-md-8 d-flex justify-content-center align-items-end"
        >
          <h1 id="countryName" class="fw-bold text-white">Not Found</h1>
        </div>
      </div>
    </section>

    <div class="row g-5 album py-5 px-5 mx-5">
      <div
        id="rightbar"
        class="col-md-5 col-lg-4 order-md-first border rounded py-3"
      >
        <p class="d-flex align-items-center m-3">
          <span class="text-primary">Tour Code : </span>
          <span id="tourCode" class="text-primary"> N/A</span>
        </p>
        <ul class="list-group mb-3">
          <li
            class="list-group-item d-flex justify-content-between lh-sm border-0"
          >
            <div class="d-flex">
              <!-- <h6 class="my-0">Product name</h6> -->
              <i class="col bi bi-calendar-fill ps-1 lightblue px-2"></i>
              <p class>Duration:</p>
            </div>
            <span class="text-body-secondary">7 Days</span>
          </li>
          <li
            class="list-group-item d-flex justify-content-between lh-sm border-0"
          >
            <div class="d-flex">
              <!-- <h6 class="my-0">Product name</h6> -->
              <i class="col bi bi-calendar-fill ps-1 lightblue px-2"></i>
              <p class>Tour Type:</p>
            </div>
            <span class="text-body-secondary">7 Days</span>
          </li>
          <li
            class="list-group-item d-flex justify-content-between lh-sm border-0"
          >
            <div class="d-flex">
              <!-- <h6 class="my-0">Product name</h6> -->
              <i class="col bi bi-calendar-fill ps-1 lightblue px-2"></i>
              <p class>Breakfast Inclusive</p>
            </div>
            <span class="text-body-secondary">7 Days</span>
          </li>
        </ul>

        <button
          type="button"
          class="btn btn-secondary toggle w-100 my-1"
          value="Share On Whatsapp"
        >
          Download Itinerary
        </button>
        <button
          type="button"
          class="btn btn-secondary toggle w-100 my-1"
          value="Share On Whatsapp"
        >
          Share On Whatsapp<i class="bi bi-whatsapp ms-2"></i>
        </button>
        <button
          type="button"
          class="btn btn-secondary toggle w-100 my-1 active"
          value="Share On Whatsapp"
        >
          Book Now
        </button>
      </div>
      <div class="col-md-7 col-lg-7 card shadow ms-5 p-4">
        <div class="">
          <img
            id="tourImage"
            src="/img/airplane.jpg"
            class="img-fluid rounded w-100"
            alt=""
          />
          <h2 class="pt-3">N/A</h2>
          <p class="text-muted">JDT-7</p>
        </div>
        <hr />
        <nav>
          <div
            id="swapTab"
            class="nav nav-tabs row row-cols-2 border-bottom-0 mb-4"
            role="tablist"
          >
            <div class="col">
              <button
                class="btn toggle btn-light w-100 m-1 active"
                id="nav-departure-tab"
                data-bs-toggle="tab"
                data-bs-target="#nav-departure"
                type="button"
                role="tab"
                aria-controls="nav-departure"
                aria-selected="true"
              >
                Departure Dates
              </button>
            </div>
            <div class="col">
              <button
                class="btn toggle btn-light w-100 m-1"
                id="nav-description-tab"
                data-bs-toggle="tab"
                data-bs-target="#nav-description"
                type="button"
                role="tab"
                aria-controls="nav-description"
                aria-selected="false"
              >
                Description
              </button>
            </div>
          </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">
          <div
            class="tab-pane fade show active"
            id="nav-departure"
            role="tabpanel"
            aria-labelledby="nav-departure-tab"
            tabindex="0"
          >
            <div class="row row-cols-4 text-center px-2">
              <div class="col"><p>Departure Date</p></div>
              <div class="col"><p>Airline</p></div>
              <div class="col"><p>Price</p></div>
              <div class="col"><p>Status</p></div>
            </div>
            <div class="accordion" id="accordionPanelsStayOpenExample">
              <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                  <button
                    class="accordion-button"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#panelsStayOpen-collapseOne"
                    aria-expanded="true"
                    aria-controls="panelsStayOpen-collapseOne"
                  >
                    Details
                  </button>
                </h2>
                <div
                  id="panelsStayOpen-collapseOne"
                  class="accordion-collapse collapse show"
                  aria-labelledby="panelsStayOpen-headingOne"
                >
                  <div class="accordion-body">
                    <div class="row row-cols-4 table table-hover">
                      <div class="col"><p>Departure Date</p></div>
                      <div class="col"><p>Airline</p></div>
                      <div class="col"><p>Price</p></div>
                      <div class="col"><p>Status</p></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#panelsStayOpen-collapseTwo"
                    aria-expanded="false"
                    aria-controls="panelsStayOpen-collapseTwo"
                  >
                    Accordion Item #2
                  </button>
                </h2>
                <div
                  id="panelsStayOpen-collapseTwo"
                  class="accordion-collapse collapse"
                  aria-labelledby="panelsStayOpen-headingTwo"
                >
                  <div class="accordion-body"></div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#panelsStayOpen-collapseThree"
                    aria-expanded="false"
                    aria-controls="panelsStayOpen-collapseThree"
                  >
                    Accordion Item #3
                  </button>
                </h2>
                <div
                  id="panelsStayOpen-collapseThree"
                  class="accordion-collapse collapse"
                  aria-labelledby="panelsStayOpen-headingThree"
                >
                  <div class="accordion-body">
                    <strong>This is the third item's accordion body.</strong> It
                    is hidden by default, until the collapse plugin adds the
                    appropriate classes that we use to style each element. These
                    classes control the overall appearance, as well as the
                    showing and hiding via CSS transitions. You can modify any
                    of this with custom CSS or overriding our default variables.
                    It's also worth noting that just about any HTML can go
                    within the <code>.accordion-body</code>, though the
                    transition does limit overflow.
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- TAB 2 -->
          <div
            class="tab-pane fade"
            id="nav-description"
            role="tabpanel"
            aria-labelledby="nav-description-tab"
            tabindex="0"
          >
            <div class="card">
              <div class="card-header bg-lightblue w-100 text-center m-0">
                <p class="text-white m-0"><strong>DETAILS</strong></p>
              </div>
              <div class="card-body">
                <p class="card-text">
                  Some quick example text to build on the card title and make up
                  the bulk of the card's content.
                </p>
              </div>
            </div>
            <div class="w-100 d-flex justify-content-center">
              <button
                type="button"
                class="btn btn-secondary toggle my-5 active"
                value="Share On Whatsapp"
              >
                Book Now
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer id="footer"></footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="/js/jquery/jquery.min.js"></script>
    <!-- <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script> -->
    <script src="/js/popper/popper.min.js"></script>
    <script src="/js/bootstrap/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="/js/index.js"></script>

    <script type="text/javascript">
      //window.onload = function () {
      const path = window.location.pathname; // Gets the full path like '/destination/Japan'
      const lastSegment = path.split("/").pop(); // Splits by '/' and gets the last part
      $("#countryName").text(lastSegment);
      // Fetch the external destinationCard.html
      $("#list-destination").empty();
      fetch("/components/destinationCard.html")
        .then((response) => response.text()) // Get the text content of the file
        .then((html) => {
          const params = [
            {
              destinationId: 0,
              destinationName: "Destination 1",
              destinationImage: "/img/tokyo.jpg",
              destinationPrice: "Destination 1's Price",
              destinationDays: "2",
              destinationNights: "1",
            },
            {
              destinationId: 1,
              destinationName: "Destination 2",
              destinationImage: "",
              destinationPrice: "Destination 2's Price",
              destinationDays: "3",
              destinationNights: "2",
            },
            {
              destinationId: 2,
              destinationName: "Destination 3",
              destinationImage: "/img/airplane.jpg",
              destinationPrice: "Destination 3's Price",
              destinationDays: "4",
              destinationNights: "3",
            },
            {
              destinationId: 3,
              destinationName: "Destination 4",
              destinationImage: "/img/airplane.jpg",
              destinationPrice: "Destination 4's Price",
              destinationDays: "5",
              destinationNights: "4",
            },
          ];

          var listHtml;
          listCard(html, params);
          // Optionally append the modified content to your main page
          // document.getElementById("list-destination").innerHTML =
          //   doc.body.innerHTML;
        })
        .catch((err) =>
          console.log("Error loading destinationCard.html:", err)
        );

      function listCard(html, params) {
        // Parse the HTML template once
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, "text/html");
        const listDestinationElement =
          document.getElementById("list-destination");

        params.forEach((element) => {
          // Clone the parsed template to avoid modifying the same nodes
          const card = doc.body.firstElementChild.cloneNode(true);

          // Modify the content of the cloned card
          const destinationId = card.querySelector("#destinationId");
          const destinationName = card.querySelector("#destinationName");
          const destinationImage = card.querySelector("#destinationImage");
          const destinationPrice = card.querySelector("#destinationPrice");
          const destinationDays = card.querySelector("#destinationDays");
          const destinationNights = card.querySelector("#destinationNights");

          // Update the cloned card content with the current destination data
          if (destinationId) destinationId.value = element.destinationId;
          if (destinationName)
            destinationName.textContent = element.destinationName;
          if (destinationImage && element.destinationImage)
            destinationImage.src = element.destinationImage;
          if (destinationPrice)
            destinationPrice.textContent = "RM " + element.destinationPrice;
          if (destinationDays)
            destinationDays.textContent = element.destinationDays + " Days ";
          if (destinationNights)
            destinationNights.textContent =
              element.destinationNights + " Nights ";

          // Append the modified card to the list
          listDestinationElement.appendChild(card);
        });
      }
      //};
    </script>
  </body>
</html>
